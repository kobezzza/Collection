/*! Collection v6.0.0-beta.5 | https://github.com/kobezzza/Collection/blob/master/LICENSE */
(function(){'use strict';function N(){function p(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function v(a){return a}function k(a,b){b=[].slice.call(arguments,1);for(var e="",d=0;d<a.length;d++)e+=a[d].replace(ha," ")+(d in b?b[d]:"");return e}function q(a){return"function"===typeof a}function w(a){return Array.isArray(a)}function I(a){return"function"===typeof Map&&a instanceof Map}function O(a){return"function"===typeof WeakMap&&a instanceof WeakMap}function C(a){return"function"===
typeof Set&&a instanceof Set}function P(a){return"function"===typeof WeakSet&&a instanceof WeakSet}function Q(a){a=w(a)||a&&Boolean(a)&&R[typeof a]&&!ia.test({}.toString.call(a))&&(0<a.length&&0 in a||0===a.length);return Boolean(a)}function D(a,b){var e="object";if(!a)return e;if(ja&&"callee"in a&&"length"in a)return"array";switch(b){case "for":e="array";break;case "for of":e="iterator";break;case "for in":e="object";break;default:I(a)?e="map":O(a)?e="weakMap":C(a)?e="set":P(a)?e="weakSet":q(a)&&
"GeneratorFunction"===a.constructor.name?e="generator":Q(a)?e="array":Boolean(a&&("function"===typeof Symbol?a[Symbol.iterator]:"function"===typeof a["@@iterator"]))&&(e="iterator")}return e}function ba(a){if(!a)return!1;if(w(a))return!0;var b=a.constructor;return q(b)?!Boolean(a)||a.constructor!==Object&&"Object"!==a.constructor.name?ka[b.name]?!1:"[native code]"===b.toString():!0:!1}function r(a){this.data="string"===typeof a?a.split(""):a||[];this.p=this.b()}function n(a){return new r(a)}function ca(a){var b=
"",e;for(e in a)a.hasOwnProperty(e)&&(b+=a[e]);return b}function la(a,b){var e={map:!0,set:!0}[b.type],d=!("array"===b.type||b.reverse||"object"===b.type&&b.notOwn&&S),c=k(ma,b.startIndex,b.endIndex,b.from,b.count,b.live,b.reverse,b.notOwn,b.inverseFilter,b.type,b.thread,!b.thread,!b.thread,!b.thread,d,d);b.thread&&(c+=k(na));for(var f=b.startIndex||0,h=!1!==b.endIndex?b.endIndex+1:0,d=T.slice(0,b.length?b.c:T.length),l=[],g=0;g<b.filter.length;g++)l.push(da.slice(0,b.length?b.a[g]:da.length));var x=
b.length?Math.max.apply(null,[].concat(b.c,b.a)):T.length;b.from&&(c+="var from = "+b.from+";");var m="",g="";b.thread?(m=k(oa),g=k(pa)):c+="that._stack.push(ctx);";c+="while (limit !== looper) {";switch(b.type){case "array":c+=k(qa);b.reverse&&(c+="clone = arr.slice.call(clone).reverse();");!b.reverse&&b.live||!f&&!h||(c+=k(ra,f,h||"data.length"));!b.reverse&&b.live?(c+=k(sa,f-1),f&&(c+=k(U,f)),h&&(c+=k(V,h))):c+=k(ta,f);x&&(1<x&&(c=f?c+("key = "+(b.reverse?"dLength - (":"")+" n + "+(f+(b.reverse?
")":""))+";"):c+("key = "+(b.reverse?"dLength - ":"")+" n;")),c+="el = clone[n];");break;case "object":if(b.reverse||S&&!b.notOwn){c+="var tmpArray;";b.notOwn||!S||b.thread?(c+="tmpArray = [];",c=b.notOwn?-1===b.notOwn?c+k(ua,m,g):c+k(va,m,g):c+k(wa,m,g)):c+="tmpArray = Object.keys(data);";b.reverse&&(c+="tmpArray.reverse();");if(f||h)c+="tmpArray = tmpArray.slice("+f+", "+(h||"tmpArray.length")+");";c+=k(xa,f)}else c+="for (key in data) {",!1===b.notOwn?c+=k(ya):-1===b.notOwn&&(c+=k(za)),c+=k(Aa),
f&&(c+=k(U,f)),h&&(c+=k(V,h));x&&(c+="el = data[key];");break;case "map":case "set":case "generator":case "iterator":var t=function(){e?(c+="var cursor = data.keys();",b.live||b.reverse||(c+="var size = data.size;")):c="generator"===b.type?c+"var cursor = data();":c+k(Ba)};if(b.reverse){t();c+=k(Ca,m,g);if(f||h)c+="tmpArray = tmpArray.slice("+f+", "+(h||"tmpArray.length")+");";c+=k(Da,x?"key = tmpArray[n];":"",f)}else t(),c+=k(Ea,x?"key = key.value;":""),f&&(c+=k(U,f)),h&&(c+=k(V,h));x&&("map"===
b.type?c+="el = data.get(key);":(c+="el = key;",1<x&&(c="set"===b.type?c+"key = null;":b.reverse?c+"key = size - i - 1;":c+"key = i;")))}c+=m;b.count&&(c+=k(Fa,b.count));if(b.filter.length){c+="if (";for(f=0;f<b.filter.length;f++)c+="("+(b.inverseFilter?"!":"")+"(f = filters["+f+"]("+l[f]+")) || f === "+(b.inverseFilter?"FALSE":"TRUE")+")",f!==b.filter.length-1&&(c+="&&");c+=") {"}l=void 0;l=b.mult?"cb("+d+");":"cb("+d+"); breaker = true;";b.count&&(l+="j++;");c=b.from?c+k(Ga,l):c+l;b.filter.length&&
(c+="}");d=k(Ha);b.thread&&(c+=d);b.live||b.reverse||!e||(c+=k(Ia));c+=k(Ja,g);b.thread&&(c+=d);c+=k(Ka);J[a]=b.thread?eval(k(La,c)):Function("o","p",c);n.ready&&function(){var b='__COLLECTION_NAMESPACE__https_github_com_kobezzza_Collection.cache.cycle["'+a+'"] = '+J[a].toString()+";";K[a]=b;W&&ea?(clearTimeout(E),E=setTimeout(function(){try{if(localStorage.setItem("__COLLECTION_CACHE_VERSION__",JSON.stringify(K)),localStorage.setItem("__COLLECTION_CACHE__",16),Ma){var a=document.createElement("script");
a.src=URL.createObjectURL(new Blob([b],{type:"application/javascript"}));document.head.appendChild(a)}}catch(c){}},5E3)):B&&(clearTimeout(E),E=setTimeout(function(){require("fs").writeFile(require("path").join(__dirname,"collection.tmp.js"),"\nexports.version = 16;\nexports.cache = "+JSON.stringify(K)+";\nexports.exec = function () { "+ca(K)+" };\n",function(){})},5E3),E.unref())}();return J[a]}function F(a){this.link=w(a)?[a]:a}function z(a,b,e){e=e||{};b instanceof F&&(b=b.valueOf());for(var d=
"string"===typeof b?b.split("."):[].concat(b),c=d.length,f=c-1,h=void 0,l=void 0,g=-1;++g<c;){b=d[g];if(null==a){if(e.test)return!1;if(e.error)throw new ReferenceError(b+" is not defined!");return}var x=g===f&&e.test;x&&(h=a,l=b);var m=I(a)||O(a),t=C(a)||P(a);if(!x&&g===f&&(e.delete||void 0!==e.value))return d={key:t?null:b,result:m||t?a.has(b):b in a,value:m?a.get(b):t?b:a[b]},e.delete?d.result&&(m||t?(a.delete(b),d.result=!a.has(b)):(Q(a)&&!isNaN(Number(b))?[].splice.call(a,b,1):delete a[b],d.result=
!1===b in a||a[b]!==d.value)):m?a.get(b)!==e.value?(a.set(b,e.value),d.result=a.get(b)===e.value):d.result=!1:t?(m=a.has(b),d.result=!1,d.value=m?b:void 0,a.has(e.value)||(m&&a.delete(b),a.add(e.value),d.result=a.has(e.value))):(Q(a)&&!isNaN(Number(d.key))?d.key=Number(d.key):d.key=String(d.key),a[b]!==e.value?(a[b]=e.value,d.result=a[b]===e.value):d.result=!1),d;m?a=a.get(b):t?a.has(b)?a=b:a=void 0:(e.create&&void 0===a[b]&&(a[b]={}),a=a[b])}return e.test?I(h)||O(h)||C(h)||P(h)?h.has(l):l in h:a}
function Na(){function a(){var a=[];n(f).forEach(function(b,c){a.push({key:c,value:A[c]})},function(a){return a.length});a.sort(b);var x=a.length-1,m=0;n(a).forEach(function(b,c){var d=Oa[x];d[1]>m&&(m=d[1]);a[c].value=d;x--});var t=Math.floor(Math.random()*(m-0+1))+0;n(a).forEach(function(a){var b=a.key,g=a.value;a=d[b];if(t>=g[0]&&t<=g[1]){e[b]=e[b]||[];g=G[b];null==a[g]&&(G[b]=g=0,c[b]=0);var m=f[b][a[g]];m&&!m.pause&&(c[b]++,e[b].push(a[g]),h+=A[b]);a.splice(g,1);a.length||(delete f[b],l--);return!1}});
if(!l)return"break"}function b(a,b){return b.value-a.value}var e={},d={},c={},f=Object.assign({},H),h=0,l=0;for(n(f).forEach(function(a,b){d[b]=n(a).map(function(a,b){return b});c[b]=0;l++},function(a){return a.length});40>=h&&"break"!==a(););n(c).forEach(function(a,b){G[b]+=a});return e}var ha=/^\s+|[\r\n]+/mg,Pa=p(["\n(function () {\n'use strict';\nvar res = true;\ntry {\narguments.callee;\n} catch (ignore) {\nres = false;\n}\nreturn res;\n})();\n"],["\n(function () {\n'use strict';\nvar res = true;\ntry {\narguments.callee;\n} catch (ignore) {\nres = false;\n}\nreturn res;\n})();\n"]),
B;try{B="object"===typeof process&&"[object process]"==={}.toString.call(process)}catch(a){B=!1}var W=!B&&"object"===typeof window,Ma=W&&"function"===typeof Blob&&"function"===typeof URL,ea=!B&&"object"===typeof localStorage,S="[native code]"===(Object.keys&&Object.keys.toString());(function(){try{var a=new Map,b={};a.set(b,!0);return a.get(b)}catch(e){return!1}})();(function(){try{var a=new Set,b={};a.add(b);return a.has(b)}catch(e){return!1}})();var X;try{X=!1===Object.getOwnPropertyDescriptor(Object.create(null,
{f:{enumerable:!1}}),"foo").enumerable}catch(a){X=!1}var Y;try{Y="bar"===JSON.parse(JSON.stringify({f:"bar"})).f}catch(a){Y=!1}var ja=Boolean(eval(k(Pa))),R={object:!0,"function":!0},ia=/\[object Function]/,ka={Crypto:!0,Number:!0,String:!0,Boolean:!0,Symbol:!0,Function:!0,Date:!0,RegExp:!0,Blob:!0,Array:!0,ArrayBuffer:!0,Uint8ClampedArray:!0,Uint8Array:!0,Uint16Array:!0,Uint32Array:!0,Int8Array:!0,Int16Array:!0,Int32Array:!0,Map:!0,WeakMap:!0,Set:!0,WeakSet:!0,Error:!0,EvalError:!0,TypeError:!0,
SyntaxError:!0,URIError:!0,RangeError:!0,ReferenceError:!0};r.prototype.b=function(){return Object.assign({mult:!0,count:!1,from:!1,startIndex:!1,endIndex:!1,reverse:!1,inverseFilter:!1,notOwn:!1,live:!1,thread:!1,priority:"normal",length:!0,filter:[]},n.config)};Object.assign(n,{config:{}});r.prototype.VERSION=[6,0,0,"beta.5"];Object.assign(n,{ready:!1,cache:{str:{},cycle:{}}});var J=n.cache.cycle,Z=Function("return this")();Z.__COLLECTION_NAMESPACE__https_github_com_kobezzza_Collection=n;var ma=
p(["\nvar \nthat = this,\ndata = o.data,\ncb = o.cb,\nfilters = o.filters,\nlink = o.link,\nonIterationEnd = o.onIterationEnd,\nonComplete = o.onComplete;\nvar\nwait = 0,\nonGlobalComplete,\nonGlobalError;\nvar\ni = -1,\nj = 0,\nn = -1;\nvar\nresults = [],\nbreaker = false,\nyielder = false,\nyieldVal;\nvar\ntimeStart,\ntimeEnd,\ntime = 0;\nvar\nlimit = 1,\nlooper = 0;\nvar\nlength,\nf;\nvar\nTRUE = this.TRUE,\nFALSE = this.FALSE,\nNULL = this.NULL;\nvar\nel,\nkey;\nvar\narr = [],\n$ = {};\nvar info = {\nstartIndex: ",
",\nendIndex: ",",\nfrom: ",",\ncount: ",",\nlive: ",",\nreverse: ",",\nnotOwn: ",",\ninverseFilter: ",",\ntype: '","',\nthread: ","\n};\nvar ctx = {\n$: $,\ninfo: info,\nget result() {\nreturn p.result;\n},\nyield: function (opt_val) {\nif (",") {\nreturn false;\n}\nyielder = true;\nyieldVal = opt_val;\nreturn true;\n},\nget next() {\nif (",") {\nreturn false;\n}\nlink.self.next();\nreturn true;\n},\nsleep: function (time, opt_test, opt_interval) {\nif (",") {\nreturn false;\n}\nctx.yield();\nreturn new Promise(function (resolve, reject) {\nlink.self.sleep = setTimeout(function () {\nif (opt_test) {\ntry {\nvar test = opt_test(ctx);\nif (test) {\nresolve();\nlink.self.next();\n} else if (opt_interval !== false) {\nctx.sleep(time, opt_test, opt_interval).then(resolve, reject);\n}\n} catch (err) {\nreject(err);\nthrow err;\n}\n} else {\nresolve();\nlink.self.next();\n}\n}, time);\n});\n},\nwait: function (promise) {\nvar thread = promise.thread;\nif (!thread || !thread.thread) {\nresults.push(thread);\nif (!wait) {\nif (onGlobalComplete) {\nonGlobalComplete(results);\nonGlobalComplete = null;\n}\nresults = [];\n}\nreturn false;\n}\nctx.yield();\nwait++;\nvar onComplete = thread.onComplete;\nthread.onComplete = function (res) {\nif (wait) {\nwait--;\n}\nresults.push(res);\nthat._stack.push(ctx);\nif (onComplete) {\nonComplete(res);\n}\nif (!wait) {\nyielder = false;\nif (onGlobalComplete) {\nonGlobalComplete(results);\nonGlobalComplete = null;\n}\nresults = [];\nthat._stack.pop();\nif (!yielder) {\nctx.next;\n}\n} else {\nthat._stack.pop();\n}\n};\nreturn promise.catch(function (err) {\nif (onGlobalError) {\nonGlobalError(err);\nonGlobalError = null;\n}\n});\n},\nget complete() {\nreturn new Promise(function (resolve, reject) {\nif (!wait) {\nresolve(that, results);\nresults = [];\nreturn false;\n}\nonGlobalComplete = resolve;\nonGlobalError = reject;\n});\n},\njump: function (val) {\nif (",
") {\nreturn false;\n}\nvar diff = i - n;\nn = val - 1;\ni = n + diff;\nreturn i;\n},\ni: function (val) {\nif (val === undefined) {\nreturn i;\n}\nif (",") {\nreturn false;\n}\nn += val;\ni += val;\nreturn i;\n},\nget reset() {\nbreaker = true;\nlimit++;\nreturn true;\n},\nget break() {\nbreaker = true;\nreturn true;\n}\n};\nvar cbCtx = Object.create(ctx);\ncbCtx.length = o.cbLength;\nvar filterCtx = Object.create(ctx);\nfilterCtx.length = o.fLength;\n"],["\nvar \nthat = this,\ndata = o.data,\ncb = o.cb,\nfilters = o.filters,\nlink = o.link,\nonIterationEnd = o.onIterationEnd,\nonComplete = o.onComplete;\nvar\nwait = 0,\nonGlobalComplete,\nonGlobalError;\nvar\ni = -1,\nj = 0,\nn = -1;\nvar\nresults = [],\nbreaker = false,\nyielder = false,\nyieldVal;\nvar\ntimeStart,\ntimeEnd,\ntime = 0;\nvar\nlimit = 1,\nlooper = 0;\nvar\nlength,\nf;\nvar\nTRUE = this.TRUE,\nFALSE = this.FALSE,\nNULL = this.NULL;\nvar\nel,\nkey;\nvar\narr = [],\n$ = {};\nvar info = {\nstartIndex: ",
",\nendIndex: ",",\nfrom: ",",\ncount: ",",\nlive: ",",\nreverse: ",",\nnotOwn: ",",\ninverseFilter: ",",\ntype: '","',\nthread: ","\n};\nvar ctx = {\n$: $,\ninfo: info,\nget result() {\nreturn p.result;\n},\nyield: function (opt_val) {\nif (",") {\nreturn false;\n}\nyielder = true;\nyieldVal = opt_val;\nreturn true;\n},\nget next() {\nif (",") {\nreturn false;\n}\nlink.self.next();\nreturn true;\n},\nsleep: function (time, opt_test, opt_interval) {\nif (",") {\nreturn false;\n}\nctx.yield();\nreturn new Promise(function (resolve, reject) {\nlink.self.sleep = setTimeout(function () {\nif (opt_test) {\ntry {\nvar test = opt_test(ctx);\nif (test) {\nresolve();\nlink.self.next();\n} else if (opt_interval !== false) {\nctx.sleep(time, opt_test, opt_interval).then(resolve, reject);\n}\n} catch (err) {\nreject(err);\nthrow err;\n}\n} else {\nresolve();\nlink.self.next();\n}\n}, time);\n});\n},\nwait: function (promise) {\nvar thread = promise.thread;\nif (!thread || !thread.thread) {\nresults.push(thread);\nif (!wait) {\nif (onGlobalComplete) {\nonGlobalComplete(results);\nonGlobalComplete = null;\n}\nresults = [];\n}\nreturn false;\n}\nctx.yield();\nwait++;\nvar onComplete = thread.onComplete;\nthread.onComplete = function (res) {\nif (wait) {\nwait--;\n}\nresults.push(res);\nthat._stack.push(ctx);\nif (onComplete) {\nonComplete(res);\n}\nif (!wait) {\nyielder = false;\nif (onGlobalComplete) {\nonGlobalComplete(results);\nonGlobalComplete = null;\n}\nresults = [];\nthat._stack.pop();\nif (!yielder) {\nctx.next;\n}\n} else {\nthat._stack.pop();\n}\n};\nreturn promise.catch(function (err) {\nif (onGlobalError) {\nonGlobalError(err);\nonGlobalError = null;\n}\n});\n},\nget complete() {\nreturn new Promise(function (resolve, reject) {\nif (!wait) {\nresolve(that, results);\nresults = [];\nreturn false;\n}\nonGlobalComplete = resolve;\nonGlobalError = reject;\n});\n},\njump: function (val) {\nif (",
") {\nreturn false;\n}\nvar diff = i - n;\nn = val - 1;\ni = n + diff;\nreturn i;\n},\ni: function (val) {\nif (val === undefined) {\nreturn i;\n}\nif (",") {\nreturn false;\n}\nn += val;\ni += val;\nreturn i;\n},\nget reset() {\nbreaker = true;\nlimit++;\nreturn true;\n},\nget break() {\nbreaker = true;\nreturn true;\n}\n};\nvar cbCtx = Object.create(ctx);\ncbCtx.length = o.cbLength;\nvar filterCtx = Object.create(ctx);\nfilterCtx.length = o.fLength;\n"]),na=p(["\nctx.thread = link.self;\nlink.self.ctx = ctx;\n"],
["\nctx.thread = link.self;\nlink.self.ctx = ctx;\n"]),oa=p(["\nif (timeStart == null) {\nthat._stack.push(ctx);\ntimeStart = new Date().valueOf();\n}\n"],["\nif (timeStart == null) {\nthat._stack.push(ctx);\ntimeStart = new Date().valueOf();\n}\n"]),pa=p(["\ntimeEnd = new Date().valueOf();\ntime += timeEnd - timeStart;\ntimeStart = timeEnd;\nif (time > this._priority[link.self.priority]) {\nthat._stack.pop();\nyield n;\ntime = 0;\ntimeStart = null;\n}\n"],["\ntimeEnd = new Date().valueOf();\ntime += timeEnd - timeStart;\ntimeStart = timeEnd;\nif (time > this._priority[link.self.priority]) {\nthat._stack.pop();\nyield n;\ntime = 0;\ntimeStart = null;\n}\n"]),
qa=p(["\nvar\nclone = data,\ndLength = data.length - 1;\n"],["\nvar\nclone = data,\ndLength = data.length - 1;\n"]),ra=p(["\nclone = arr.slice.call(clone, ",", ",");\n"],["\nclone = arr.slice.call(clone, ",", ",");\n"]),sa=p(["\nfor (n = ","; ++n < clone.length;) {\ni = n;\n"],["\nfor (n = ","; ++n < clone.length;) {\ni = n;\n"]),U=p(["\nif (n < ",") {\ncontinue;\n}\n"],["\nif (n < ",") {\ncontinue;\n}\n"]),V=p(["\nif (n > ",") {\nbreak;\n};\n"],["\nif (n > ",") {\nbreak;\n};\n"]),ta=p(["\nlength = clone.length;\nfor (n = -1; ++n < length;) {\ni = n + ",
";\n"],["\nlength = clone.length;\nfor (n = -1; ++n < length;) {\ni = n + ",";\n"]),ua=p(["\nfor (var key in data) {\n","\nif (data.hasOwnProperty(key)) {\ncontinue;\n}\ntmpArray.push(key);\n","\n}\n"],["\nfor (var key in data) {\n","\nif (data.hasOwnProperty(key)) {\ncontinue;\n}\ntmpArray.push(key);\n","\n}\n"]),va=p(["\nfor (var key in data) {\n","\ntmpArray.push(key);\n","\n}\n"],["\nfor (var key in data) {\n","\ntmpArray.push(key);\n","\n}\n"]),wa=p(["\nfor (var key in data) {\n","\nif (!data.hasOwnProperty(key)) {\nbreak;\n}\ntmpArray.push(key);\n",
"\n}\n"],["\nfor (var key in data) {\n","\nif (!data.hasOwnProperty(key)) {\nbreak;\n}\ntmpArray.push(key);\n","\n}\n"]),xa=p(["\nlength = tmpArray.length;\nfor (n = -1; ++n < length;) {\nkey = tmpArray[n];\nif (key in data === false) {\ncontinue;\n}\ni = n + ",";\n"],["\nlength = tmpArray.length;\nfor (n = -1; ++n < length;) {\nkey = tmpArray[n];\nif (key in data === false) {\ncontinue;\n}\ni = n + ",";\n"]),ya=p(["\nif (!data.hasOwnProperty(key)) {\nbreak;\n}"],["\nif (!data.hasOwnProperty(key)) {\nbreak;\n}"]),
za=p(["\nif (!data.hasOwnProperty(key)) {\ncontinue;\n}"],["\nif (!data.hasOwnProperty(key)) {\ncontinue;\n}"]),Aa=p(["\nn++;\ni = n;\n"],["\nn++;\ni = n;\n"]),Ba=p(["\nvar\niteratorKey = typeof Symbol !== 'undefined' && Symbol.iterator,\ncursor;\nif ('next' in data) {\ncursor = data;\n} else {\ncursor = (iteratorKey ? data[iteratorKey]() : data['@@iterator'] && data['@@iterator']()) || data;\n}\n"],["\nvar\niteratorKey = typeof Symbol !== 'undefined' && Symbol.iterator,\ncursor;\nif ('next' in data) {\ncursor = data;\n} else {\ncursor = (iteratorKey ? data[iteratorKey]() : data['@@iterator'] && data['@@iterator']()) || data;\n}\n"]),
Ca=p(["\nvar tmpArray = [];\nfor (var step = cursor.next(); !step.done; step = cursor.next()) {\n","\ntmpArray.push(step.value);\n","\n}\ntmpArray.reverse();\nvar size = tmpArray.length;\n"],["\nvar tmpArray = [];\nfor (var step = cursor.next(); !step.done; step = cursor.next()) {\n","\ntmpArray.push(step.value);\n","\n}\ntmpArray.reverse();\nvar size = tmpArray.length;\n"]),Da=p(["\nlength = tmpArray.length;\nfor (n = -1; ++n < length;) {\n","\ni = n + ",";\n"],["\nlength = tmpArray.length;\nfor (n = -1; ++n < length;) {\n",
"\ni = n + ",";\n"]),Ea=p(["\nfor (key = cursor.next(); !key.done; key = cursor.next()) {\n","\nn++;\ni = n;\n"],["\nfor (key = cursor.next(); !key.done; key = cursor.next()) {\n","\nn++;\ni = n;\n"]),Fa=p(["\nif (j === ",") {\nbreak;\n}\n"],["\nif (j === ",") {\nbreak;\n}\n"]),Ga=p(["\nif (from !== 0) {\nfrom--;\n} else {\n","\n}\n"],["\nif (from !== 0) {\nfrom--;\n} else {\n","\n}\n"]),Ha=p(["\nif (yielder) {\nthat._stack.pop();\nyielder = false;\nif (link.self) {\nlink.self.pause = true;\n} else {\nlink.pause = true;\n}\nyield yieldVal;\nlink.self.pause = false;\ndelete link.pause;\nyieldVal = void 0;\nthat._stack.push(ctx);\n}\n"],
["\nif (yielder) {\nthat._stack.pop();\nyielder = false;\nif (link.self) {\nlink.self.pause = true;\n} else {\nlink.pause = true;\n}\nyield yieldVal;\nlink.self.pause = false;\ndelete link.pause;\nyieldVal = void 0;\nthat._stack.push(ctx);\n}\n"]),Ia=p(["\nsize--;\nif (!size) {\nbreak;\n}\n"],["\nsize--;\nif (!size) {\nbreak;\n}\n"]),Ja=p(["\nif (breaker) {\nbreak;\n}\n","\n}\nbreaker = false;\nlooper++;\nif (onIterationEnd) {\nonIterationEnd(ctx);\n}\n"],["\nif (breaker) {\nbreak;\n}\n","\n}\nbreaker = false;\nlooper++;\nif (onIterationEnd) {\nonIterationEnd(ctx);\n}\n"]),
Ka=p(["\n}\nthat._stack.pop();\nif (onComplete) {\nonComplete(p.result);\n}\nreturn p.result;\n"],["\n}\nthat._stack.pop();\nif (onComplete) {\nonComplete(p.result);\n}\nreturn p.result;\n"]),La=p(["(function *(o, p) { "," })"],["(function *(o, p) { "," })"]),E=void 0,K=n.cache.str,T=["el","key","data","cbCtx"],da=["el","key","data","filterCtx"];if(!1!==Z.COLLECTION_LOCAL_CACHE)if(W&&Y&&ea)try{if("loading"===document.readyState){var Qa=localStorage.getItem("__COLLECTION_CACHE__"),fa=localStorage.getItem("__COLLECTION_CACHE_VERSION__");
fa&&16==Qa?(n.cache.str=JSON.parse(fa),document.write('<script type="text/javascript">'+ca(n.cache.str)+"__COLLECTION_NAMESPACE__https_github_com_kobezzza_Collection.ready = true;\x3c/script>")):(localStorage.removeItem("__COLLECTION_CACHE_VERSION__"),localStorage.removeItem("__COLLECTION_CACHE__"),n.ready=!0)}}catch(a){}else if(B)try{var aa=require(require("path").join(__dirname,"collection.tmp.js"));16===aa.version&&(aa.exec(),n.cache.str=aa.cache)}catch(a){}finally{n.ready=!0}var A={low:5,normal:10,
hight:20,critical:40};r.prototype.length=function(a,b){function e(){return d.result++}var d=v(b||{});w(a)||q(a)||(d=a||d,a=null);d.result=0;d.filter=[].concat(d.filter||[],a||[]);e.__COLLECTION_TMP__lengthQuery=!0;var c=v(this.forEach(e,d));!0!==e.__COLLECTION_TMP__lengthQuery&&(d.result=e.__COLLECTION_TMP__lengthQuery,d.onComplete&&d.onComplete(d.result));return c!==this?c:d.result};var ga=r.prototype._stack=[];r.prototype.forEach=function(a,b){var e=this,d=v(Object.create(this.p));this.p=this.b();
w(b)||q(b)?d.filter=b:Object.assign(d,b);d.notOwn&&(d.use="for in");if(d.hasOwnProperty("priority")||d.onChunk)d.thread=!0;A[d.priority]||(A[d.priority]="normal");var c=this.data,f=d.type=D(c,d.use);if(!Boolean(c)||!R[typeof c]||{weakMap:!0,weakSet:!0}[f])throw new TypeError("Incorrect data type");var h=d.filter=[].concat(d.filter||[]);if(!h.length&&a.__COLLECTION_TMP__lengthQuery){if("array"===f)return a.__COLLECTION_TMP__lengthQuery=(d.startIndex||!1!==d.endIndex?[].slice.call(c,d.startIndex||0,
!1!==d.endIndex?d.endIndex+1:c.length):c).length,this;if({map:!0,set:!0}[f]&&!d.startIndex&&!1===d.endIndex)return a.__COLLECTION_TMP__lengthQuery=c.size,this}var l=!1,g=!1;if(d.length){l=d.c=a.__COLLECTION_TMP__length||a.length;d.a=[];for(g=0;g<h.length;g++)d.a.push(h[g].__COLLECTION_TMP__length||h[g].length);g=d.a.length?d.a:!1}var x=void 0;l&&3<l&&function(){var a=v(Object.assign({},b,{onChunk:null,onIterationEnd:null,onComplete:function(a){x.value=a}}));x=function(b){if(!x.value||b)x.value=e.length(h,
a);return x.value}}();var m=void 0;g&&3<Math.max.apply(null,g)&&function(){var a=v(Object.assign({},b,{onChunk:null,onIterationEnd:null,onComplete:function(a){m.value=a}}));m=function(b){if(!m.value||b)m.value=e.length(null,a);return m.value}}();var f=[f,l,h.length,g,d.length,d.thread,d.notOwn,d.live,d.inverseFilter,d.reverse,d.mult,d.count,d.from,d.startIndex,d.endIndex].join(),t={},y=v(J[f]||la(f,d)),u={data:c,cb:a,cbLength:x,filters:h,fLength:m,link:t,onComplete:d.onComplete,onIterationEnd:d.onIterationEnd};
if(d.thread&&(c=function(){var c=void 0,g=new Promise(function(g,f){function m(a){return a?function(b,c,d,e){try{return a(b,c,d,e)}catch(g){throw f(g),g;}}:void 0}for(var l=0;l<h.length;l++)h[l]=m(h[l]);var x=d.onComplete;u.onComplete=d.onComplete=m(function(a){x&&x(a);g(a)});u.cb=m(a);u.onIterationEnd=m(d.onIterationEnd);c=t.self=y.call(e,u,b||d);t.pause&&(t.self.pause=!0);for(var l=ga.length,n=void 0,k=1;n=ga[l-k];){if(n.thread){n.thread.children.push(c);break}k++}e.g(c,d.priority,d.onComplete,
m(d.onChunk))});g.thread=c;return{h:g}}(),"object"===typeof c))return c.h;t.self=y.call(this,u,b||d);t.pause&&(t.self.pause=!0);return this};r.prototype.filter=function(a){this.p.filter=this.p.filter.concat([].slice.call(arguments));return this};r.prototype.thread=function(a,b){q(a)&&(b=a,a=null);this.p.thread=!0;a&&(this.p.priority=a);b&&(this.p.onChunk=b);return this};r.prototype.start=function(a){this.p.startIndex=a;return this};r.prototype.end=function(a){this.p.endIndex=a;return this};r.prototype.from=
function(a){this.p.from=a;return this};r.prototype.count=function(a){this.p.count=a;return this};Object.defineProperties(r.prototype,{one:{get:function(){this.p.mult=!1;return this}},inverse:{get:function(){this.p.inverseFilter=!0;return this}},reverse:{get:function(){this.p.reverse=!0;return this}}});n.clone=function(a){return JSON.parse(JSON.stringify(a))};n.extend=function(a,b,e){var d=!1,c=!1,f=!1,h=!1,l=void 0;a&&"boolean"!==typeof a?(f=a.withProto,c=a.withAccessors&&X,d=Boolean(a.concatArray),
h=a.traits||!1,l=Boolean(a.deep)):l=a||!1;var g;g=Boolean(b)&&R[typeof b]?b:w(arguments[2])?[]:{};for(var x=arguments.length,m=1;++m<x;){var t=arguments[m];if(t)for(var y in t){if(c){var u=Object.getOwnPropertyDescriptor(t,y);if(u&&(u.set||u.get)){Object.defineProperty(g,y,{get:u.get,set:u.set});continue}}var u=g[y],k=t[y];if(g!==k&&k!==t){var p=void 0;if(l&&k&&"object"===typeof k&&((p=w(k))||ba(k))){var v=u&&"object"===typeof u,r=v&&ba(u);f&&r&&!g.hasOwnProperty(y)&&(g[y]=w(g[y])?u=g[y].slice():
u=Object.create(g[y]));var q=void 0;if(p)if(p=w(u),r=!1,q=void 0,!p&&f&&d&&(p=(q=v&&Object.getPrototypeOf(u))&&w(q)&&(r=!0)),p)if(d){g[y]=(r?q:u).concat(k);continue}else q=u;else q=[];else u&&r&&!w(u)?q=u:q={};g[y]=n.extend(a,q,k)}else void 0!==k&&(h?y in g===(-1===h)&&(g[y]=k):g[y]=k)}}}return g};Object.assign(n,{extend:n.extend,clone:n.clone});r.prototype.map=function(a,b){var e=v(b||{});q(a)||(e=a||e,a=function(a){return a});if(w(e)||q(e))e={filter:e};var d="object";!e.use&&!e.notOwn||e.initial?
d=e.initial?D(e.initial):D(this.data,e.use):e.initial={};var c=e.initial||this.data,f=void 0;switch(d){case "object":f={};break;case "array":w(c)?f=[]:(f={},d="object");break;case "generator":case "iterator":f=[];d="array";break;default:f=new c.constructor}c=void 0;switch(d){case "array":c=function(){f.push(a.apply(null,arguments))};c.__COLLECTION_TMP__length=a.length;break;case "object":c=function(b,c){f[c]=a.apply(null,arguments)};c.__COLLECTION_TMP__length=c.length>a.length?c.length:a.length;break;
case "map":case "weakMap":c=function(b,c){f.set(c,a.apply(null,arguments))};c.__COLLECTION_TMP__length=c.length>a.length?c.length:a.length;break;case "set":case "weakSep":c=function(){f.add(a.apply(null,arguments))},c.__COLLECTION_TMP__length=a.length}e.result=f;d=v(this.forEach(c,e));return d!==this?d:e.result};F.prototype.valueOf=function(){return this.link};n.in=function(a,b){return z(b,a,{test:!0})};Object.assign(n,{in:n.in});r.prototype.in=function(a){return z(this.data,a,{test:!0})};r.prototype.get=
function(a,b){var e=v(b||{});if(a instanceof F||!q(a)&&(w(a)&&!q(a[1])||null!=a&&"object"!==typeof a)){var d=z(this.data,a);e.onComplete&&e.onComplete(d);return d}w(a)||q(a)||(e=a||e,a=null);var c=void 0;!1!==e.mult&&!1!==this.p.mult?function(){var a=e.result=[];c=function(b){return a.push(b)}}():c=function(a){return e.result=a};e.filter=[].concat(e.filter||[],a||[]);d=v(this.forEach(c,e));return d!==this?d:e.result};r.prototype.reduce=function(a,b,e,d){function c(c){null==b?(f.result=c,b=!0):f.result=
a.apply(null,[f.result].concat([].slice.call(arguments)))}var f=v(d||{});w(e)||q(e)||(f=e||f,e=null);f.result=b;f.filter=[].concat(f.filter||[],e||[]);c.__COLLECTION_TMP__length=a.length-1;e=v(this.forEach(c,f));return e!==this?e:f.result};r.prototype.every=function(a,b){var e=v(b||{});w(a)||q(a)||(e=a||e,a=null);e.result=!0;e.filter=[].concat(e.filter||[],a||[]);e.inverseFilter=!e.inverseFilter;e.mult=!1;var d=v(this.forEach(function(){return e.result=!1},e));return d!==this?d:e.result};r.prototype.some=
function(a,b){var e=v(b||{});w(a)||q(a)||(e=a||e,a=null);e.result=!1;e.filter=[].concat(e.filter||[],a||[]);e.mult=!1;var d=v(this.forEach(function(){return e.result=!0},e));return d!==this?d:e.result};r.prototype.search=function(a,b){var e=this,d=v(b||{});w(a)||q(a)||(d=a||d,a=null);var c=void 0;!1!==d.mult&&!1!==this.p.mult?function(){var a=d.result=[];C(e.data)?c=function(b){return a.push(b)}:c=function(b,c){return a.push(c)}}():(d.result=null,c=function(a,b){return d.result=I(e.data)?{value:b}:
C(e.data)?{value:a}:b});d.filter=[].concat(d.filter||[],a||[]);var f=v(this.forEach(c,d));return f!==this?f:d.result};r.prototype.includes=function(a,b,e){var d=v(e||{});w(b)||q(b)||(d=b||d,b=null);d.filter=[Number.isNaN(a)?function(a){return Number.isNaN(a)}:function(b){return b===a}].concat(b||[]);d.mult=!1;d.result=!1;b=v(this.forEach(function(){return d.result=!0},d));return b!==this?b:d.result};r.prototype.group=function(a,b,e){var d=a||function(a){return a},c=v(e||{});w(b)||q(b)||(c=b||c,b=
null);var f=q(d),h=c.result=c.useMap?new Z.Map:{};a=void 0;a=c.useMap?function(a,b){var e=f?d.apply(null,arguments):z(a,d),m=c.saveKeys?b:a;h.has(e)?h.get(e).push(m):h.set(e,[m])}:function(a,b){var e=f?d.apply(null,arguments):z(a,d),m=c.saveKeys?b:a;h[e]?h[e].push(m):h[e]=[m]};f&&(a.__COLLECTION_TMP__length=a.length>d.length?a.length:d.length);c.filter=[].concat(c.filter||[],b||[]);c.mult=!0;b=v(this.forEach(a,c));return b!==this?b:c.result};r.prototype.remove=function(a,b){var e=v(b||{});if(a instanceof
F||!q(a)&&(w(a)&&!q(a[1])||null!=a&&"object"!==typeof a)){var d=z(this.data,a,{delete:!0});e.onComplete&&e.onComplete(d);return d}w(a)||q(a)||(e=a||e,a=null);d=D(this.data,e.use);if({iterator:!0,generator:!0}[d])throw new TypeError("Incorrect data type");var c=!1!==e.mult&&!1!==this.p.mult,f=[],h=[].splice;c&&(e.result=f);var l=void 0;switch(d){case "map":l=function(a,b,d){d.delete(b);a={result:!d.has(b),key:b,value:a};c?f.push(a):e.result=a};break;case "set":l=function(a,b,d){d.delete(a);a={result:!d.has(a),
key:null,value:a};c?f.push(a):e.result=a};break;case "array":e.reverse?l=function(a,b,d){h.call(d,b,1);a={result:d[b]!==a,key:b,value:a};c?f.push(a):e.result=a}:function(){var a=0;l=e.live?function(b,d,t,y){h.call(t,d,1);y.i(-1);b={result:t[d]!==b,key:d+a,value:b};c?f.push(b):e.result=b;a++}:function(b,d,t,y){function u(u){if(a===u)return!1;h.call(t,d,1);y.i(-1);u={result:t[d]!==b,key:d+a,value:b};c?f.push(u):e.result=u;a++}var l=y.length();"number"===typeof l?u(l):y.wait(l).then(u)}}();break;default:l=
function(a,b,d){delete d[b];a={result:!1===b in d,key:b,value:a};c?f.push(a):e.result=a}}e.filter=[].concat(e.filter||[],a||[]);d=v(this.forEach(l,e));return d!==this?d:e.result};r.prototype.set=function(a,b,e){var d=v(e||{}),c=this.data;if(b instanceof F||!q(b)&&(w(b)&&!q(b[1])||null!=b&&"object"!==typeof b))return b=z(c,b,{value:a,create:!1!==d.create,error:!0}),d.onComplete&&d.onComplete(b),b;w(b)||q(b)||(d=b||d,b=null);e=D(c,d.use);var f=q(a),h=!1!==d.mult&&!1!==this.p.mult,l=[];h&&(d.result=
l);var g=void 0;if(f){switch(e){case "map":g=function(b,c,e){var f=a.apply(null,arguments),g=void 0===f;void 0!==f&&e.get(c)!==f&&(e.set(c,f),g=e.get(c)===f);f={key:c,value:b,result:g};h?l.push(f):d.result=f};break;case "set":g=function(b,c,e){var f=a.apply(null,arguments),g=void 0===f;void 0===f||e.has(f)||(e.delete(b),e.add(f),g=e.has(f));f={key:null,value:b,result:g};h?l.push(f):d.result=f};break;default:g=function(b,c,e){var f=a.apply(null,arguments),g=void 0===f;void 0!==f&&e[c]!==f&&(e[c]=f,
g=e[c]===f);f={key:c,value:b,result:g};h?l.push(f):d.result=f}}g.__COLLECTION_TMP__length=g.length>a.length?g.length:a.length}else switch(e){case "map":g=function(b,c,e){var f=!1;e.get(c)!==a&&(e.set(c,a),f=e.get(c)===a);b={key:c,value:b,result:f};h?l.push(b):d.result=b};break;case "set":g=function(b,c,e){c=!1;e.has(a)||(e.delete(b),e.add(a),c=e.has(a));b={key:null,value:b,result:c};h?l.push(b):d.result=b};break;default:g=function(b,c,e){var f=!1;e[c]!==a&&(e[c]=a,f=e[c]===a);b={key:c,value:b,result:f};
h?l.push(b):d.result=b}}var k=d.onIterationEnd;d.filter=[].concat(d.filter||[],b||[]);d.onIterationEnd=function(b){d.result&&d.result.length||!("key"in d)||(null==d.key&&w(c)&&(d.key=c.length),z(c,d.key,{value:f?a(void 0,void 0,c,b):a,create:!1!==d.create}));k&&k(b)};b=v(this.forEach(g,d));return b!==this?b:d.result};var Oa=[[0,40],[41,160],[161,500],[501,2E3]];r.prototype._priority=A;var G={},H={},L;for(L in A){if(!A.hasOwnProperty(L))break;G[L]=0;H[L]=[]}var M=0;r.prototype.g=function(a,b,e,d){function c(){n(Na()).forEach(function(a,
b){var c=H[b];n(a).forEach(function(a,b,d){var f=c[a];if(f.next().done){if(c.splice(a,1),n(d).forEach(function(a,b){a&&d[b]--},{startIndex:b+1}),M--,f.onComplete&&f.onComplete!==e)f.onComplete(f.ctx.result)}else if(f.onChunk)f.onChunk(f.ctx)})});M&&setTimeout(c,40)}a.thread=!0;a.priority=b;a.destroy=function(){return n.destroy(a)};a.onComplete=e;a.onChunk=d;a.pause=!1;a.sleep=null;a.children=[];var f=a.next;Object.defineProperty(a,"next",{value:function(){null!==a.sleep&&(clearTimeout(a.sleep),a.sleep=
null);return f.apply(this,arguments)}});M++;H[b].push(a);1===M&&("function"===typeof setImmediate?setImmediate(c):setTimeout(c,0))};n.destroy=function(a){if(!a||!a.thread)return!1;var b=a.thread;clearTimeout(b.sleep);n(b.children).forEach(function(a){return n.destroy(a)});n(H[b.priority]).remove(function(a){return a===b},{mult:!1});return!0};Object.assign(n,{destroy:n.destroy});return n}
"object"===typeof exports&&"undefined"!==typeof module?module.exports=N():"function"===typeof define&&define.amd?define("Collection",N):this.$C=N();
}).call(this);
